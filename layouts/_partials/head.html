<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>
  {{- if .IsHome -}}
    {{ site.Title }}{{ with site.Params.subtitle }} · {{ . }}{{ end }}
  {{- else -}}
    {{ .Title }} - {{ site.Title }}
  {{- end -}}
</title>

<meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Summary | plainify | truncate 150 }}{{ end }}">
<meta name="author" content="{{ .Params.author | default site.Params.author | default site.Title }}">
<link rel="canonical" href="{{ .Permalink }}">
<link rel="icon" href="{{ "favicon.ico" | relURL }}">

<!-- JSON-LD（仅文章页） -->
{{- if .IsPage }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ .Title }}",
  "description": "{{ with .Description }}{{ . }}{{ else }}{{ .Summary | plainify | truncate 150 }}{{ end }}",
  "author": { "@type": "Person", "name": "{{ .Params.author | default site.Params.author }}" },
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
  "mainEntityOfPage": { "@type": "WebPage", "@id": "{{ .Permalink }}" }
}
</script>
{{- end }}

<!-- 样式 -->
{{ $styles := resources.Match "css/*.css" }}
{{ $bundle := $styles | resources.Concat "css/bundle.css" | minify | fingerprint }}
<link rel="stylesheet" href="{{ $bundle.RelPermalink }}" integrity="{{ $bundle.Data.Integrity }}">

<!-- js -->
{{ $scripts := resources.Match "js/*.js" }}
{{ $bundle := $scripts | resources.Concat "js/bundle.js" | minify | fingerprint }}
<script src="{{ $bundle.RelPermalink }}" integrity="{{ $bundle.Data.Integrity }}" defer></script>

<!-- 基础 favicon -->
<link rel="icon" href="/icon/favicon.ico" sizes="any">

<!-- PNG 图标 -->
<link rel="icon" type="image/png" sizes="32x32" href="/icon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/icon/favicon-16x16.png">

<!-- Apple Touch Icon -->
<link rel="apple-touch-icon" href="/icon/apple-touch-icon.png">

<!-- Web App Manifest（如果有） -->
<link rel="manifest" href="/icon/site.webmanifest">